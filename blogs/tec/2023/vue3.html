<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ã€vue3ç¬”è®°ã€‘Bç«™å°šç¡…è°·è®°å½• | PRéœéœ</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="https://img01.anzhiy.cn/useruploads/0/2023/05/27/6471acfabd710.png">
    <script>
          var _hmt = _hmt || [];
          (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?dfc70ba533034221e5013c435692ef14";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
          })();
        </script>
    <meta name="description" content="è¾¹åŸå¾ˆç¾ï¼Œå¯æƒœå‚©é€è¿˜æ˜¯æ²¡æœ‰å›æ¥.">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.4857d397.css" as="style"><link rel="preload" href="/assets/js/app.ba955e17.js" as="script"><link rel="preload" href="/assets/js/3.0a738093.js" as="script"><link rel="preload" href="/assets/js/1.d14c9ea1.js" as="script"><link rel="preload" href="/assets/js/24.98b99e42.js" as="script"><link rel="prefetch" href="/assets/js/10.19f20edc.js"><link rel="prefetch" href="/assets/js/11.0c3fd684.js"><link rel="prefetch" href="/assets/js/12.2d125833.js"><link rel="prefetch" href="/assets/js/13.50478809.js"><link rel="prefetch" href="/assets/js/14.00a9544e.js"><link rel="prefetch" href="/assets/js/15.c1a1010e.js"><link rel="prefetch" href="/assets/js/16.dc27d3a9.js"><link rel="prefetch" href="/assets/js/17.c769735c.js"><link rel="prefetch" href="/assets/js/18.b68ebf8e.js"><link rel="prefetch" href="/assets/js/19.842848bc.js"><link rel="prefetch" href="/assets/js/20.a098c646.js"><link rel="prefetch" href="/assets/js/21.49c9fe07.js"><link rel="prefetch" href="/assets/js/22.8052366f.js"><link rel="prefetch" href="/assets/js/23.583f6358.js"><link rel="prefetch" href="/assets/js/25.b0645f84.js"><link rel="prefetch" href="/assets/js/26.f3ff10e3.js"><link rel="prefetch" href="/assets/js/27.afd48af8.js"><link rel="prefetch" href="/assets/js/28.11491fa9.js"><link rel="prefetch" href="/assets/js/29.b8730b4b.js"><link rel="prefetch" href="/assets/js/30.da8faa70.js"><link rel="prefetch" href="/assets/js/4.f9a407d7.js"><link rel="prefetch" href="/assets/js/5.18e145a1.js"><link rel="prefetch" href="/assets/js/6.a2e485e9.js"><link rel="prefetch" href="/assets/js/7.6b1e5fb7.js"><link rel="prefetch" href="/assets/js/8.b75af852.js"><link rel="prefetch" href="/assets/js/9.21bc68c2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4857d397.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-106e3130><div data-v-106e3130><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-106e3130 data-v-106e3130><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4d3be7b7 data-v-106e3130 data-v-106e3130><h3 class="title" style="display:none;" data-v-4d3be7b7 data-v-4d3be7b7>PRéœéœ</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-4d3be7b7 data-v-4d3be7b7><input type="password" value="" data-v-4d3be7b7> <span data-v-4d3be7b7>Konck! Knock!</span> <button data-v-4d3be7b7>OK</button></label> <div class="footer" style="display:none;" data-v-4d3be7b7 data-v-4d3be7b7><span data-v-4d3be7b7><i class="iconfont reco-theme" data-v-4d3be7b7></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4d3be7b7>vuePress-theme-reco</a></span> <span data-v-4d3be7b7><i class="iconfont reco-copyright" data-v-4d3be7b7></i> <a data-v-4d3be7b7><span data-v-4d3be7b7>PRéœéœ</span>
          Â Â 
          <span data-v-4d3be7b7>2014 - </span>
          2023
        </a></span></div></div> <div class="hide" data-v-106e3130><div data-v-106e3130><div id="smart" class="wrapper-page" style="background-image:url(https://doc.panjingyi.top/blog/202207020050313.jpeg);background-position-x:center;background-position-y:center;background-size:cover;background-repeat-x:no-repeat;background-repeat-y:no-repeat;" data-v-106e3130><header class="navbar" data-v-106e3130><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="PRéœéœ" class="logo"> <span class="site-name">PRéœéœ</span></a> <div class="links"><div id="dayNightSwitch" class="generalWrapper" data-v-68728e36><a class="click" data-v-68728e36><div class="onOff daySwitch" data-v-68728e36><div class="star star1" data-v-68728e36></div> <div class="star star2" data-v-68728e36></div> <div class="star star3" data-v-68728e36></div> <div class="star star4" data-v-68728e36></div> <div class="star star5" data-v-68728e36></div> <div class="star sky" data-v-68728e36></div> <div class="sunMoon" data-v-68728e36><div class="crater crater1" data-v-68728e36></div> <div class="crater crater2" data-v-68728e36></div> <div class="crater crater3" data-v-68728e36></div> <div class="cloud part1" data-v-68728e36></div> <div class="cloud part2" data-v-68728e36></div></div></div></a></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åšå®¢
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/å‰ç«¯/" class="nav-link"><i class="iconfont undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/æŠ€èƒ½/" class="nav-link"><i class="iconfont undefined"></i>
  æŠ€èƒ½
</a></li><li class="dropdown-item"><!----> <a href="/categories/æŠ€æœ¯ç¬”è®°/" class="nav-link"><i class="iconfont undefined"></i>
  æŠ€æœ¯ç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/categories/åç«¯/" class="nav-link"><i class="iconfont undefined"></i>
  åç«¯
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  æ ‡ç­¾
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  æ—¶é—´è½´
</a></div><div class="nav-item"><a href="https://doyuodo.gitee.io/hexo" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-blog"></i>
  å¦ä¸€ä¸ªæˆ‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/about/" class="nav-link"><i class="iconfont reco-account"></i>
  å…³äºæˆ‘
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-106e3130></div> <aside class="sidebar" data-v-106e3130><div class="personal-info-wrapper" data-v-d528efe2 data-v-106e3130><img src="/author.jpg" alt="author-avatar" class="personal-img" data-v-d528efe2> <h3 class="name" data-v-d528efe2>
    PRéœéœ
  </h3> <div class="num" data-v-d528efe2><div data-v-d528efe2><h3 data-v-d528efe2>16</h3> <h6 data-v-d528efe2>æ–‡ç« </h6></div> <div data-v-d528efe2><h3 data-v-d528efe2>20</h3> <h6 data-v-d528efe2>æ ‡ç­¾</h6></div></div> <hr data-v-d528efe2></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åšå®¢
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/å‰ç«¯/" class="nav-link"><i class="iconfont undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/æŠ€èƒ½/" class="nav-link"><i class="iconfont undefined"></i>
  æŠ€èƒ½
</a></li><li class="dropdown-item"><!----> <a href="/categories/æŠ€æœ¯ç¬”è®°/" class="nav-link"><i class="iconfont undefined"></i>
  æŠ€æœ¯ç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/categories/åç«¯/" class="nav-link"><i class="iconfont undefined"></i>
  åç«¯
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  æ ‡ç­¾
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  æ—¶é—´è½´
</a></div><div class="nav-item"><a href="https://doyuodo.gitee.io/hexo" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-blog"></i>
  å¦ä¸€ä¸ªæˆ‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/about/" class="nav-link"><i class="iconfont reco-account"></i>
  å…³äºæˆ‘
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4d3be7b7 data-v-106e3130><h3 class="title" style="display:none;" data-v-4d3be7b7 data-v-4d3be7b7>ã€vue3ç¬”è®°ã€‘Bç«™å°šç¡…è°·è®°å½•</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-4d3be7b7 data-v-4d3be7b7><input type="password" value="" data-v-4d3be7b7> <span data-v-4d3be7b7>Konck! Knock!</span> <button data-v-4d3be7b7>OK</button></label> <div class="footer" style="display:none;" data-v-4d3be7b7 data-v-4d3be7b7><span data-v-4d3be7b7><i class="iconfont reco-theme" data-v-4d3be7b7></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4d3be7b7>vuePress-theme-reco</a></span> <span data-v-4d3be7b7><i class="iconfont reco-copyright" data-v-4d3be7b7></i> <a data-v-4d3be7b7><span data-v-4d3be7b7>PRéœéœ</span>
          Â Â 
          <span data-v-4d3be7b7>2014 - </span>
          2023
        </a></span></div></div></div> <div data-v-106e3130><main class="page"><div class="page-title" style="display:none;"><h1 class="title">ã€vue3ç¬”è®°ã€‘Bç«™å°šç¡…è°·è®°å½•</h1> <div class="page-info" data-v-04a855f8><i class="iconfont reco-account" data-v-04a855f8><span data-v-04a855f8>PRéœéœ</span></i> <i class="iconfont reco-date" data-v-04a855f8><span data-v-04a855f8>2023-04-20</span></i> <i class="iconfont reco-eye" data-v-04a855f8><span id="/blogs/tec/2023/vue3.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-04a855f8><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="iconfont reco-tag tags" data-v-04a855f8><span class="tag-item" data-v-04a855f8>vue3</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><div class="custom-block tip"><p class="custom-block-title">ä½†å› çƒ­çˆ± æ„¿è¿ä¸‡éš¾</p> <p>ä½ åšä¸‰å››æœˆçš„äº‹ï¼Œå…«ä¹æœˆä»½çš„äº‹è‡ªæœ‰ç­”æ¡ˆ</p></div> <h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="header-anchor">#</a> ä»‹ç»</h2> <blockquote><p><strong>ä»€ä¹ˆæ˜¯ Vueï¼Ÿ</strong></p></blockquote> <p>Vue (å‘éŸ³ä¸º /vjuË/ï¼Œç±»ä¼¼ <strong>view</strong>) æ˜¯ä¸€æ¬¾ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ <code>JavaScript</code> æ¡†æ¶ã€‚å®ƒåŸºäºæ ‡å‡† HTMLã€CSS å’Œ JavaScript æ„å»ºï¼Œå¹¶æä¾›äº†ä¸€å¥—å£°æ˜å¼çš„ã€ç»„ä»¶åŒ–çš„ç¼–ç¨‹æ¨¡å‹ï¼Œå¸®åŠ©ä½ é«˜æ•ˆåœ°å¼€å‘ç”¨æˆ·ç•Œé¢ã€‚æ— è®ºæ˜¯ç®€å•è¿˜æ˜¯å¤æ‚çš„ç•Œé¢ï¼ŒVue éƒ½å¯ä»¥èƒœä»»ã€‚ğŸ˜</p> <h2 id="vue3-å¿«é€Ÿä¸Šæ‰‹"><a href="#vue3-å¿«é€Ÿä¸Šæ‰‹" class="header-anchor">#</a> Vue3 å¿«é€Ÿä¸Šæ‰‹</h2> <h3 id="_1ã€vue3-å¸¦æ¥äº†ä»€ä¹ˆ"><a href="#_1ã€vue3-å¸¦æ¥äº†ä»€ä¹ˆ" class="header-anchor">#</a> 1ã€vue3 å¸¦æ¥äº†ä»€ä¹ˆ</h3> <ul><li><p>æ€§èƒ½çš„æå‡</p> <p>æ‰“åŒ…å¤§å°å‡å°‘ 41%</p> <p>åˆæ¬¡æ¸²æŸ“å¿« 55%ï¼Œæ›´æ–°æ¸²æŸ“å¿« 133%</p> <p>å†…å­˜å‡å°‘ 54%ç­‰</p></li> <li><p>æºç çš„å‡çº§</p> <p>ä½¿ç”¨ Proxy æ›¿ä»£ defineProperty å®ç°å“åº”å¼</p> <p>é‡å†™è™šæ‹Ÿ DOM çš„å®ç°å’Œ<code>Tree-Shaking</code></p></li> <li><p>æ‹¥æŠ± Typescript</p> <p>Vue3 å¯ä»¥æ›´å¥½çš„æ”¯æŒ Typescript</p></li></ul> <h4 id="æ–°çš„ç‰¹æ€§"><a href="#æ–°çš„ç‰¹æ€§" class="header-anchor">#</a> æ–°çš„ç‰¹æ€§</h4> <ul><li><p>composition APIï¼ˆç»„åˆ APIï¼‰</p> <p>setup é…ç½®</p> <p>ref äº reactive</p> <p>watch äº watchEffect</p> <p>provide äº inject</p> <p>..........</p></li> <li><p>æ–°çš„å†…ç½®ç»„ä»¶</p> <p><code>Fragment</code></p> <p><code>teleport</code></p> <p><code>Suspense</code></p></li> <li><p>å…¶ä»–æ”¹å˜</p> <p>æ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­</p> <p><code>data</code>é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</p> <p>ç§»é™¤<code>keyCode</code>æ”¯æŒä½œä¸º<code>v-on</code>çš„ä¿®é¥°ç¬¦</p> <p>.......</p></li></ul> <h3 id="_2ã€åˆ›å»º-vue3-0-å·¥ç¨‹"><a href="#_2ã€åˆ›å»º-vue3-0-å·¥ç¨‹" class="header-anchor">#</a> 2ã€åˆ›å»º Vue3.0 å·¥ç¨‹</h3> <blockquote><p>åœ¨è¿™é‡Œæ¨èä½¿ç”¨ viteï¼Œå› ä¸º vite æ›´å¿« ğŸ˜ã€‚</p></blockquote> <ul><li><h4 id="ä½¿ç”¨-vue-cli-åˆ›å»º"><a href="#ä½¿ç”¨-vue-cli-åˆ›å»º" class="header-anchor">#</a> ä½¿ç”¨ vue-cli åˆ›å»º</h4></li></ul> <p><a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼šhttps://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment">## æŸ¥çœ‹@vue/cliç‰ˆæœ¬ï¼Œç¡®ä¿@vue/cliç‰ˆæœ¬åœ¨4.5.0ä»¥ä¸Š</span>
vue --version
<span class="token comment">## å®‰è£…æˆ–è€…å‡çº§ä½ çš„@vue/cli</span>
<span class="token function">npm</span> <span class="token function">install</span> -g @vue/cli
<span class="token comment">## åˆ›å»º</span>
vue create vue_test
<span class="token comment">## å¯åŠ¨</span>
<span class="token builtin class-name">cd</span> vue_test
<span class="token function">npm</span> run serve
</code></pre></div><ul><li><h4 id="ä½¿ç”¨-vite-åˆ›å»º"><a href="#ä½¿ç”¨-vite-åˆ›å»º" class="header-anchor">#</a> ä½¿ç”¨ vite åˆ›å»º</h4></li></ul> <p><a href="https://v3.cn.vuejs.org/guide/installation.html#vite" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼šhttps://v3.cn.vuejs.org/guide/installation.html#vite</p> <p>vite å®˜ç½‘ï¼šhttps://vitejs.cn</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment">## åˆ›å»ºå·¥ç¨‹</span>
<span class="token function">npm</span> init vite-app <span class="token operator">&lt;</span>project-name<span class="token operator">&gt;</span>
<span class="token comment">## è¿›å…¥å·¥ç¨‹ç›®å½•</span>
<span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>project-name<span class="token operator">&gt;</span>
<span class="token comment">## å®‰è£…ä¾èµ–</span>
<span class="token function">npm</span> <span class="token function">install</span>
<span class="token comment">## è¿è¡Œ</span>
<span class="token function">npm</span> run dev
</code></pre></div><p>æœ€ååœ¨æœ¬åœ°çš„æµè§ˆå™¨è¾“å…¥<code>localhost:8080</code>å°±å¯ä»¥çœ‹åˆ°æ•ˆæœå•¦~</p> <h3 id="_3ã€å¸¸ç”¨-composition-api"><a href="#_3ã€å¸¸ç”¨-composition-api" class="header-anchor">#</a> 3ã€å¸¸ç”¨ Composition API</h3> <p>1.æ‹‰å¼€åºå¹•çš„ setup</p> <ol><li>ç†è§£ï¼šVue3.0 ä¸­ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ï¼Œå€¼ä¸ºä¸€ä¸ªå‡½æ•°ã€‚</li> <li>setup æ˜¯æ‰€æœ‰<strong>Composition APIï¼ˆç»„åˆ APIï¼‰*</strong>â€œ è¡¨æ¼”çš„èˆå° â€*ã€‚</li> <li>ç»„ä»¶ä¸­æ‰€ç”¨åˆ°çš„ï¼šæ•°æ®ã€æ–¹æ³•ç­‰ç­‰ï¼Œå‡è¦é…ç½®åœ¨ setup ä¸­ã€‚</li> <li>setup å‡½æ•°çš„ä¸¤ç§è¿”å›å€¼ï¼š
<ol><li>è‹¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å¯¹è±¡ä¸­çš„å±æ€§ã€æ–¹æ³•, åœ¨æ¨¡æ¿ä¸­å‡å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ï¼ˆé‡ç‚¹å…³æ³¨ï¼ï¼‰</li> <li>è‹¥è¿”å›ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼šåˆ™å¯ä»¥è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹ã€‚ï¼ˆäº†è§£ï¼‰</li></ol></li> <li>æ³¨æ„ç‚¹ï¼š
<ol><li>å°½é‡ä¸è¦ä¸ Vue2.x é…ç½®æ··ç”¨
<ul><li>Vue2.x é…ç½®ï¼ˆdataã€methosã€computed...ï¼‰ä¸­<strong>å¯ä»¥è®¿é—®åˆ°</strong>setup ä¸­çš„å±æ€§ã€æ–¹æ³•ã€‚</li> <li>ä½†åœ¨ setup ä¸­<strong>ä¸èƒ½è®¿é—®åˆ°</strong>Vue2.x é…ç½®ï¼ˆdataã€methosã€computed...ï¼‰ã€‚</li> <li>å¦‚æœæœ‰é‡å, setup ä¼˜å…ˆã€‚</li></ul></li> <li>setup ä¸èƒ½æ˜¯ä¸€ä¸ª async å‡½æ•°ï¼Œå› ä¸ºè¿”å›å€¼ä¸å†æ˜¯ return çš„å¯¹è±¡, è€Œæ˜¯ promise, æ¨¡æ¿çœ‹ä¸åˆ° return å¯¹è±¡ä¸­çš„å±æ€§ã€‚ï¼ˆåæœŸä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ª Promise å®ä¾‹ï¼Œä½†éœ€è¦ Suspense å’Œå¼‚æ­¥ç»„ä»¶çš„é…åˆï¼‰</li></ol></li></ol> <p>å†è¯¦ç»†ä¸€ç‚¹å¯ä»¥å»<a href="https://cn.vuejs.org/guide/extras/composition-api-faq.html" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>å‚è€ƒä¸€ä¸‹å“ˆ</p> <p>2.refå‡½æ•°</p> <ul><li><p>ä½œç”¨: å®šä¹‰ä¸€ä¸ªå“åº”å¼çš„æ•°æ®</p></li> <li><p>è¯­æ³•:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> xxx <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>initValue<span class="token punctuation">)</span>
</code></pre></div><ul><li>åˆ›å»ºä¸€ä¸ªåŒ…å«å“åº”å¼æ•°æ®çš„<strong>å¼•ç”¨å¯¹è±¡ï¼ˆreferenceå¯¹è±¡ï¼Œç®€ç§°refå¯¹è±¡ï¼‰</strong>ã€‚</li> <li>JSä¸­æ“ä½œæ•°æ®ï¼š <code>xxx.value</code></li> <li>æ¨¡æ¿ä¸­è¯»å–æ•°æ®: ä¸éœ€è¦.valueï¼Œç›´æ¥ï¼š<code>&lt;div&gt;&lt;/div&gt;</code></li></ul></li> <li><p>å¤‡æ³¨ï¼š</p> <ul><li>æ¥æ”¶çš„æ•°æ®å¯ä»¥æ˜¯ï¼šåŸºæœ¬ç±»å‹ã€ä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ç±»å‹ã€‚</li> <li>åŸºæœ¬ç±»å‹çš„æ•°æ®ï¼šå“åº”å¼ä¾ç„¶æ˜¯é <code>Object.defineProperty()</code>çš„<code>get</code>ä¸<code>set</code>å®Œæˆçš„ã€‚</li> <li>å¯¹è±¡ç±»å‹çš„æ•°æ®ï¼šå†…éƒ¨ <em>â€œ æ±‚åŠ© â€</em> äº†Vue3.0ä¸­çš„ä¸€ä¸ªæ–°å‡½æ•°â€”â€” <code>reactive</code>å‡½æ•°ã€‚</li></ul></li></ul> <p>3.reactiveå‡½æ•°</p> <ul><li>ä½œç”¨: å®šä¹‰ä¸€ä¸ª<strong>å¯¹è±¡ç±»å‹</strong>çš„å“åº”å¼æ•°æ®ï¼ˆåŸºæœ¬ç±»å‹ä¸è¦ç”¨å®ƒï¼Œè¦ç”¨<code>ref</code>å‡½æ•°ï¼‰</li> <li>è¯­æ³•ï¼š<code>const ä»£ç†å¯¹è±¡= reactive(æºå¯¹è±¡)</code>æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ï¼Œè¿”å›ä¸€ä¸ª<strong>ä»£ç†å¯¹è±¡ï¼ˆProxyçš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°proxyå¯¹è±¡ï¼‰</strong></li> <li>reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®æ˜¯â€œæ·±å±‚æ¬¡çš„â€ã€‚</li> <li>å†…éƒ¨åŸºäº ES6 çš„ Proxy å®ç°ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡æ“ä½œæºå¯¹è±¡å†…éƒ¨æ•°æ®è¿›è¡Œæ“ä½œã€‚</li></ul> <p>vue2.xçš„å“åº”å¼</p> <ul><li><p>å®ç°åŸç†ï¼š</p> <ul><li><p>å¯¹è±¡ç±»å‹ï¼šé€šè¿‡<code>Object.defineProperty()</code>å¯¹å±æ€§çš„è¯»å–ã€ä¿®æ”¹è¿›è¡Œæ‹¦æˆªï¼ˆæ•°æ®åŠ«æŒï¼‰ã€‚</p></li> <li><p>æ•°ç»„ç±»å‹ï¼šé€šè¿‡é‡å†™æ›´æ–°æ•°ç»„çš„ä¸€ç³»åˆ—æ–¹æ³•æ¥å®ç°æ‹¦æˆªã€‚ï¼ˆå¯¹æ•°ç»„çš„å˜æ›´æ–¹æ³•è¿›è¡Œäº†åŒ…è£¹ï¼‰ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">'count'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
    <span class="token function">set</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li> <li><p>å­˜åœ¨é—®é¢˜ï¼š</p> <ul><li>æ–°å¢å±æ€§ã€åˆ é™¤å±æ€§, ç•Œé¢ä¸ä¼šæ›´æ–°ã€‚</li> <li>ç›´æ¥é€šè¿‡ä¸‹æ ‡ä¿®æ”¹æ•°ç»„, ç•Œé¢ä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</li></ul></li></ul> <p>Vue3.0çš„å“åº”å¼</p> <ul><li><p>å®ç°åŸç†:</p> <ul><li><p>é€šè¿‡Proxyï¼ˆä»£ç†ï¼‰:  æ‹¦æˆªå¯¹è±¡ä¸­ä»»æ„å±æ€§çš„å˜åŒ–, åŒ…æ‹¬ï¼šå±æ€§å€¼çš„è¯»å†™ã€å±æ€§çš„æ·»åŠ ã€å±æ€§çš„åˆ é™¤ç­‰ã€‚</p></li> <li><p>é€šè¿‡Reflectï¼ˆåå°„ï¼‰:  å¯¹æºå¯¹è±¡çš„å±æ€§è¿›è¡Œæ“ä½œã€‚</p></li> <li><p>MDNæ–‡æ¡£ä¸­æè¿°çš„Proxyä¸Reflectï¼š</p> <ul><li><p>Proxyï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy</p></li> <li><p>Reflectï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ‹¦æˆªè¯»å–å±æ€§å€¼</span>
    <span class="token function">get</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// æ‹¦æˆªè®¾ç½®å±æ€§å€¼æˆ–æ·»åŠ æ–°å±æ€§</span>
    <span class="token function">set</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// æ‹¦æˆªåˆ é™¤å±æ€§</span>
    <span class="token function">deleteProperty</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">deleteProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

proxy<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'tom'</span>   
</code></pre></div></li></ul></li></ul></li></ul> <p>5.reactiveå¯¹æ¯”ref</p> <ul><li>ä»å®šä¹‰æ•°æ®è§’åº¦å¯¹æ¯”ï¼š
<ul><li>refç”¨æ¥å®šä¹‰ï¼š<strong>åŸºæœ¬ç±»å‹æ•°æ®</strong>ã€‚</li> <li>reactiveç”¨æ¥å®šä¹‰ï¼š<strong>å¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ç±»å‹æ•°æ®</strong>ã€‚</li> <li>å¤‡æ³¨ï¼šrefä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰<strong>å¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ç±»å‹æ•°æ®</strong>, å®ƒå†…éƒ¨ä¼šè‡ªåŠ¨é€šè¿‡<code>reactive</code>è½¬ä¸º<strong>ä»£ç†å¯¹è±¡</strong>ã€‚</li></ul></li> <li>ä»åŸç†è§’åº¦å¯¹æ¯”ï¼š
<ul><li>refé€šè¿‡<code>Object.defineProperty()</code>çš„<code>get</code>ä¸<code>set</code>æ¥å®ç°å“åº”å¼ï¼ˆæ•°æ®åŠ«æŒï¼‰ã€‚</li> <li>reactiveé€šè¿‡ä½¿ç”¨<strong>Proxy</strong>æ¥å®ç°å“åº”å¼ï¼ˆæ•°æ®åŠ«æŒï¼‰, å¹¶é€šè¿‡<strong>Reflect</strong>æ“ä½œ<strong>æºå¯¹è±¡</strong>å†…éƒ¨çš„æ•°æ®ã€‚</li></ul></li> <li>ä»ä½¿ç”¨è§’åº¦å¯¹æ¯”ï¼š
<ul><li>refå®šä¹‰çš„æ•°æ®ï¼šæ“ä½œæ•°æ®<strong>éœ€è¦</strong><code>.value</code>ï¼Œè¯»å–æ•°æ®æ—¶æ¨¡æ¿ä¸­ç›´æ¥è¯»å–<strong>ä¸éœ€è¦</strong><code>.value</code>ã€‚</li> <li>reactiveå®šä¹‰çš„æ•°æ®ï¼šæ“ä½œæ•°æ®ä¸è¯»å–æ•°æ®ï¼š<strong>å‡ä¸éœ€è¦</strong><code>.value</code>ã€‚</li></ul></li></ul> <p>6.setupçš„ä¸¤ä¸ªæ³¨æ„ç‚¹</p> <ul><li>setupæ‰§è¡Œçš„æ—¶æœº
<ul><li>åœ¨beforeCreateä¹‹å‰æ‰§è¡Œä¸€æ¬¡ï¼Œthisæ˜¯undefinedã€‚</li></ul></li> <li>setupçš„å‚æ•°
<ul><li>propsï¼šå€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«ï¼šç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥ï¼Œä¸”ç»„ä»¶å†…éƒ¨å£°æ˜æ¥æ”¶äº†çš„å±æ€§ã€‚</li> <li>contextï¼šä¸Šä¸‹æ–‡å¯¹è±¡
<ul><li>attrs: å€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«ï¼šç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥ï¼Œä½†æ²¡æœ‰åœ¨propsé…ç½®ä¸­å£°æ˜çš„å±æ€§, ç›¸å½“äº <code>this.$attrs</code>ã€‚</li> <li>slots: æ”¶åˆ°çš„æ’æ§½å†…å®¹, ç›¸å½“äº <code>this.$slots</code>ã€‚</li> <li>emit: åˆ†å‘è‡ªå®šä¹‰äº‹ä»¶çš„å‡½æ•°, ç›¸å½“äº <code>this.$emit</code>ã€‚</li></ul></li></ul></li></ul> <p>7.è®¡ç®—å±æ€§ä¸ç›‘è§†</p> <p>1.computedå‡½æ•°</p> <ul><li><p>ä¸Vue2.xä¸­computedé…ç½®åŠŸèƒ½ä¸€è‡´</p></li> <li><p>å†™æ³•</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>computed<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
	<span class="token comment">//è®¡ç®—å±æ€§â€”â€”ç®€å†™</span>
    <span class="token keyword">let</span> fullName <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> person<span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> person<span class="token punctuation">.</span>lastName
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">//è®¡ç®—å±æ€§â€”â€”å®Œæ•´</span>
    <span class="token keyword">let</span> fullName <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> person<span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> person<span class="token punctuation">.</span>lastName
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> nameArr <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span>
            person<span class="token punctuation">.</span>firstName <span class="token operator">=</span> nameArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
            person<span class="token punctuation">.</span>lastName <span class="token operator">=</span> nameArr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <p>2.watchå‡½æ•°</p> <ul><li><p>ä¸Vue2.xä¸­watché…ç½®åŠŸèƒ½ä¸€è‡´</p></li> <li><p>ä¸¤ä¸ªå°â€œå‘â€ï¼š</p> <ul><li>ç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®æ—¶ï¼šoldValueæ— æ³•æ­£ç¡®è·å–ã€å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§†ï¼ˆdeepé…ç½®å¤±æ•ˆï¼‰ã€‚</li> <li>ç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­æŸä¸ªå±æ€§æ—¶ï¼šdeepé…ç½®æœ‰æ•ˆã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//æƒ…å†µä¸€ï¼šç›‘è§†refå®šä¹‰çš„å“åº”å¼æ•°æ®</span>
<span class="token function">watch</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sumå˜åŒ–äº†'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>immediate<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//æƒ…å†µäºŒï¼šç›‘è§†å¤šä¸ªrefå®šä¹‰çš„å“åº”å¼æ•°æ®</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>sum<span class="token punctuation">,</span>msg<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sumæˆ–msgå˜åŒ–äº†'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> 

<span class="token comment">/* æƒ…å†µä¸‰ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®
			è‹¥watchç›‘è§†çš„æ˜¯reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œåˆ™æ— æ³•æ­£ç¡®è·å¾—oldValueï¼ï¼
			è‹¥watchç›‘è§†çš„æ˜¯reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œåˆ™å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§† 
*/</span>
<span class="token function">watch</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'personå˜åŒ–äº†'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>immediate<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>deep<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//æ­¤å¤„çš„deepé…ç½®ä¸å†å¥æ•ˆ</span>

<span class="token comment">//æƒ…å†µå››ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­çš„æŸä¸ªå±æ€§</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>person<span class="token punctuation">.</span>job<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'personçš„jobå˜åŒ–äº†'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>immediate<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>deep<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 

<span class="token comment">//æƒ…å†µäº”ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­çš„æŸäº›å±æ€§</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>person<span class="token punctuation">.</span>job<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>person<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'personçš„jobå˜åŒ–äº†'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>immediate<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>deep<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//ç‰¹æ®Šæƒ…å†µ</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>person<span class="token punctuation">.</span>job<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'personçš„jobå˜åŒ–äº†'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>deep<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//æ­¤å¤„ç”±äºç›‘è§†çš„æ˜¯reactiveç´ å®šä¹‰çš„å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œæ‰€ä»¥deepé…ç½®æœ‰æ•ˆ</span>
</code></pre></div></li></ul> <p>3.watchEffectå‡½æ•°</p> <ul><li><p>watchçš„å¥—è·¯æ˜¯ï¼šæ—¢è¦æŒ‡æ˜ç›‘è§†çš„å±æ€§ï¼Œä¹Ÿè¦æŒ‡æ˜ç›‘è§†çš„å›è°ƒã€‚</p></li> <li><p>watchEffectçš„å¥—è·¯æ˜¯ï¼šä¸ç”¨æŒ‡æ˜ç›‘è§†å“ªä¸ªå±æ€§ï¼Œç›‘è§†çš„å›è°ƒä¸­ç”¨åˆ°å“ªä¸ªå±æ€§ï¼Œé‚£å°±ç›‘è§†å“ªä¸ªå±æ€§ã€‚</p></li> <li><p>watchEffectæœ‰ç‚¹åƒcomputedï¼š</p> <ul><li>ä½†computedæ³¨é‡çš„è®¡ç®—å‡ºæ¥çš„å€¼ï¼ˆå›è°ƒå‡½æ•°çš„è¿”å›å€¼ï¼‰ï¼Œæ‰€ä»¥å¿…é¡»è¦å†™è¿”å›å€¼ã€‚</li> <li>è€ŒwatchEffectæ›´æ³¨é‡çš„æ˜¯è¿‡ç¨‹ï¼ˆå›è°ƒå‡½æ•°çš„å‡½æ•°ä½“ï¼‰ï¼Œæ‰€ä»¥ä¸ç”¨å†™è¿”å›å€¼ã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//watchEffectæ‰€æŒ‡å®šçš„å›è°ƒä¸­ç”¨åˆ°çš„æ•°æ®åªè¦å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ç›´æ¥é‡æ–°æ‰§è¡Œå›è°ƒã€‚</span>
<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> x1 <span class="token operator">=</span> sum<span class="token punctuation">.</span>value
    <span class="token keyword">const</span> x2 <span class="token operator">=</span> person<span class="token punctuation">.</span>age
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'watchEffecté…ç½®çš„å›è°ƒæ‰§è¡Œäº†'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h4 id="_8-ç”Ÿå‘½å‘¨æœŸ"><a href="#_8-ç”Ÿå‘½å‘¨æœŸ" class="header-anchor">#</a> 8.ç”Ÿå‘½å‘¨æœŸ</h4> <p><strong>vue2.xçš„ç”Ÿå‘½å‘¨æœŸ</strong><a href="https://camo.githubusercontent.com/d3208de8b93d0b857b87de1a39e6111b0c7422852ebad7bf565839a9e293ec0e/68747470733a2f2f636e2e7675656a732e6f72672f696d616765732f6c6966656379636c652e706e67" target="_blank" rel="noopener noreferrer"><img src="https://camo.githubusercontent.com/d3208de8b93d0b857b87de1a39e6111b0c7422852ebad7bf565839a9e293ec0e/68747470733a2f2f636e2e7675656a732e6f72672f696d616765732f6c6966656379636c652e706e67" alt="lifecycle_2"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>vue3.0çš„ç”Ÿå‘½å‘¨æœŸ</strong><a href="https://camo.githubusercontent.com/61d3d36c4324c0d7aa49a526b596f185c79196e12defe548e4f9c19245b455bb/68747470733a2f2f76332e636e2e7675656a732e6f72672f696d616765732f6c6966656379636c652e737667" target="_blank" rel="noopener noreferrer"><img src="https://camo.githubusercontent.com/61d3d36c4324c0d7aa49a526b596f185c79196e12defe548e4f9c19245b455bb/68747470733a2f2f76332e636e2e7675656a732e6f72672f696d616765732f6c6966656379636c652e737667" alt="lifecycle_2"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>Vue3.0ä¸­å¯ä»¥ç»§ç»­ä½¿ç”¨Vue2.xä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä½†æœ‰æœ‰ä¸¤ä¸ªè¢«æ›´åï¼š
<ul><li><code>beforeDestroy</code>æ”¹åä¸º <code>beforeUnmount</code></li> <li><code>destroyed</code>æ”¹åä¸º <code>unmounted</code></li></ul></li> <li>Vue3.0ä¹Ÿæä¾›äº† Composition API å½¢å¼çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä¸Vue2.xä¸­é’©å­å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š
<ul><li><code>beforeCreate</code>===&gt;<code>setup()</code></li> <li><code>created</code>=======&gt;<code>setup()</code></li> <li><code>beforeMount</code> ===&gt;<code>onBeforeMount</code></li> <li><code>mounted</code>=======&gt;<code>onMounted</code></li> <li><code>beforeUpdate</code>===&gt;<code>onBeforeUpdate</code></li> <li><code>updated</code> =======&gt;<code>onUpdated</code></li> <li><code>beforeUnmount</code> ==&gt;<code>onBeforeUnmount</code></li> <li><code>unmounted</code> =====&gt;<code>onUnmounted</code></li></ul></li></ul> <p>9.è‡ªå®šä¹‰hookå‡½æ•°</p> <ul><li>ä»€ä¹ˆæ˜¯hookï¼Ÿâ€”â€” æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠsetupå‡½æ•°ä¸­ä½¿ç”¨çš„Composition APIè¿›è¡Œäº†å°è£…ã€‚</li> <li>ç±»ä¼¼äºvue2.xä¸­çš„mixinã€‚</li> <li>è‡ªå®šä¹‰hookçš„ä¼˜åŠ¿: å¤ç”¨ä»£ç , è®©setupä¸­çš„é€»è¾‘æ›´æ¸…æ¥šæ˜“æ‡‚ã€‚</li></ul> <p>10.toRef</p> <ul><li>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ª ref å¯¹è±¡ï¼Œå…¶valueå€¼æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ã€‚</li> <li>è¯­æ³•ï¼š<code>const name = toRef(person,'name')</code></li> <li>åº”ç”¨:   è¦å°†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§å•ç‹¬æä¾›ç»™å¤–éƒ¨ä½¿ç”¨æ—¶ã€‚</li> <li>æ‰©å±•ï¼š<code>toRefs</code> ä¸<code>toRef</code>åŠŸèƒ½ä¸€è‡´ï¼Œä½†å¯ä»¥æ‰¹é‡åˆ›å»ºå¤šä¸ª ref å¯¹è±¡ï¼Œè¯­æ³•ï¼š<code>toRefs(person)</code></li></ul> <h3 id="_4ã€å…¶ä»–-composition-api"><a href="#_4ã€å…¶ä»–-composition-api" class="header-anchor">#</a> 4ã€å…¶ä»– Composition API</h3> <h3 id="_5ã€composition-api-çš„ä¼˜åŠ¿"><a href="#_5ã€composition-api-çš„ä¼˜åŠ¿" class="header-anchor">#</a> 5ã€Composition API çš„ä¼˜åŠ¿</h3> <h3 id="_6ã€æ–°çš„ç»„ä»¶"><a href="#_6ã€æ–°çš„ç»„ä»¶" class="header-anchor">#</a> 6ã€æ–°çš„ç»„ä»¶</h3> <h3 id="_7ã€å…¶ä»–"><a href="#_7ã€å…¶ä»–" class="header-anchor">#</a> 7ã€å…¶ä»–</h3></div> <footer class="page-edit" style="display:none;"><!----> <!----></footer> <!----> <!----> <!----></main> <!----></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:55px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.85;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/assets/js/app.ba955e17.js" defer></script><script src="/assets/js/3.0a738093.js" defer></script><script src="/assets/js/1.d14c9ea1.js" defer></script><script src="/assets/js/24.98b99e42.js" defer></script>
  </body>
</html>
